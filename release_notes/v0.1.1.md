# PyWiki v0.1.1 Release Notes

**Released:** 2026-02-27
**Tag:** [`v0.1.1`](https://github.com/your-org/pywiki/releases/tag/v0.1.1)
**Full changelog:** [v0.1.0 ‚Üí v0.1.1](https://github.com/your-org/pywiki/compare/v0.1.0...v0.1.1)

---

## What's New

### Category Pages

PyWiki now supports MediaWiki-style category tagging. Add a category declaration anywhere in a
page (typically the footer) and PyWiki will automatically generate a category index page listing
all tagged pages alphabetically.

**Syntax by format:**

| Format | Syntax |
|--------|--------|
| Markdown | `[[Category:Software]]` |
| Wikitext | `[[Category:Software]]` |
| RST | `.. category:: Software` |

**How it works:**

- Category links appear in a **footer bar** at the bottom of every page that declares them.
- Clicking a category link opens `/category/{name}` ‚Äî a live index of all pages in that category,
  grouped by namespace with format badges and last-edited timestamps.
- Categories are extracted at render time from the raw page content ‚Äî no database migration required.
- Multiple categories per page are supported. Duplicate and case-variant entries are deduplicated.
- The `/special` hub now shows an **All categories** list linking to each category index.

---

### Tools Sidebar Section

Every page view now has a **Tools** section in the sidebar (mirroring MediaWiki's Tools panel):

- **üñ®Ô∏è Printable version** ‚Äî a clean, print-optimised standalone page with no navigation chrome,
  serif typography, and a browser Print button. Activates `@media print` CSS for direct printing.
- **Special pages** ‚Äî link to the Special Pages hub.
- **üìé Upload file** ‚Äî links to the page's attachment API (visible to logged-in users only).

---

### Special Pages Hub (`/special`)

A new system-generated page at `/special` provides a central overview of the wiki:

- **Statistics** ‚Äî total pages, total revisions, registered users, namespace count.
- **Namespaces** ‚Äî list of all namespaces with their default format badge.
- **All categories** ‚Äî every category declared across the wiki, linked to their index pages.
- **Maintenance links** ‚Äî Recent changes, Search, Create page, Admin panel (admins only).

The Special Pages link is also available in the base sidebar navigation on every page.

---

## Bug Fixes

### Starlette `TemplateResponse` deprecation resolved

All 21 `TemplateResponse` calls in `views.py` have been updated to pass `request` as the first
positional argument, as required by Starlette ‚â• 0.28. The internal `_ctx()` helper was
simplified accordingly. This eliminates `DeprecationWarning` noise from the test output and
ensures forward compatibility.

### Docutils `writer_name` deprecation resolved

The RST renderer (`_render_rst()`) now uses `writer="html5"` instead of the deprecated
`writer_name="html5"` keyword argument, eliminating a `PendingDeprecationWarning` from Docutils.

---

## Test Coverage

A new test module `tests/test_04_features.py` adds **25 tests** covering:

- `extract_categories()` unit tests for all three formats, deduplication, and edge cases
- Category page listing, filtering, and cross-format rendering
- Category footer links appearing on page view
- Recent Changes page loading, filtering by namespace, and limit parameter
- Special Pages statistics, namespace listing, and category discovery
- Printable version rendering, category display, 404 handling, and no-nav assertion

Full suite: **52 tests, 0 failures, 0 warnings**.

---

## Upgrade Notes

No database migrations are required. Category extraction is entirely content-based ‚Äî existing
pages gain category links automatically if their content already contains `[[Category:...]]` tags.

### If upgrading from v0.1.0

```bash
git pull
git checkout v0.1.1
uv pip install -r requirements.txt   # no new dependencies
uv run uvicorn app.main:app --reload
```

---

## What's Next (planned for v0.1.2+)

- Wikitext table syntax (`{| ... |}` ‚Üí `<table>`)
- Syntax highlighting for fenced code blocks (Pygments / highlight.js)
- Page move with redirect stub at old slug
- Namespace default format honoured on the Create Page form

See [`TODO.md`](../../TODO.md) for the full backlog.
