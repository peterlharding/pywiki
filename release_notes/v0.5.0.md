# PyWiki v0.5.0 Release Notes

**Released:** 2026-03-02

## Highlights

### Production deployment support

PyWiki is ready for production. This release adds a `deploy/` directory
containing everything needed to stand up the application on a live server
behind nginx with HTTPS.

Target: **https://expanse.performiq.com**

---

## What's New

### `deploy/` directory

| File | Purpose |
|------|---------|
| `deploy/README.md` | Step-by-step deployment guide (11 steps) |
| `deploy/pywiki.service` | systemd unit file |
| `deploy/nginx-pywiki.conf` | nginx reverse-proxy config with SSL |
| `deploy/.env.example` | Production environment template |

### `deploy/pywiki.service`

Runs uvicorn as a system service under a dedicated `pywiki` user:

- Listens on `127.0.0.1:8700` (not exposed externally)
- 4 workers
- `Restart=on-failure` with 5s backoff
- Logs to systemd journal (`journalctl -u pywiki -f`)

### `deploy/nginx-pywiki.conf`

- HTTPS on port 443 → proxies to `127.0.0.1:8700`
- HTTP → HTTPS redirect on port 80
- Let's Encrypt / certbot certificate paths pre-configured
- Static files (`/static/`) served directly by nginx with 7-day cache headers
- 55 MB `client_max_body_size` for attachment uploads
- Security headers: `X-Frame-Options`, `X-Content-Type-Options`, `Referrer-Policy`
- ACME challenge pass-through for certificate renewal

### `deploy/.env.example`

Pre-filled with production-appropriate defaults for `expanse.performiq.com`.
Covers all settings: `DATABASE_URL`, `SECRET_KEY`, `BASE_URL`, `ATTACHMENT_ROOT`,
all `SMTP_*` keys, `ALLOW_REGISTRATION`, `CORS_ORIGINS`.

### `deploy/README.md`

Full 11-step deployment guide:

1. Create system user and directories
2. Deploy application code (git or rsync)
3. Create virtualenv and install dependencies
4. Configure `.env`
5. Create PostgreSQL database and user
6. Run Alembic migrations
7. Install and start the systemd service
8. Obtain SSL certificate via certbot
9. Install nginx config
10. Open firewall ports
11. Bootstrap first admin user (and disable public registration)

Also includes an **Updating the application** section with the full
pull → install → migrate → restart cycle.

---

## Upgrading from v0.4.x

No database migrations required. No application code changes.

Simply copy the `deploy/` files to the server and follow the README.
